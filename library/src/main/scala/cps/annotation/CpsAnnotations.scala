package cps.annotation

import scala.annotation.StaticAnnotation

/**
 * Annotation to specify the delayed variant class for a function-storing class.
 *
 * Can be:
 * - Added by programmer to specify custom delayed implementation
 * - Auto-generated by the plugin with the generated delayed class
 *
 * Example:
 * {{{
 *   @delayedVariant[DelayedLazyTransform]
 *   class LazyTransform[A, B](source: List[A], f: A => B)
 *
 *   // Generated or user-provided:
 *   class DelayedLazyTransform[F[_], A, B](...)
 * }}}
 *
 * @tparam T The delayed variant class type
 */
class delayedVariant[T] extends StaticAnnotation

/**
 * Marker annotation for auto-generated delayed classes.
 * The plugin adds this to delayed classes it generates.
 */
class generatedDelayed extends StaticAnnotation

/**
 * Marker annotation for direct functions.
 *
 * A direct function is one whose result type captures CpsMonadContext.
 * The plugin detects these and adds this annotation before erasure,
 * so the post-erasure phase can transform the signature.
 *
 * The monad type F is extracted from the CpsMonadContext[F] parameter
 * during transformation (F may be a type parameter of the function itself).
 *
 * Example:
 * {{{
 *   // Before plugin (with capture checking):
 *   def fetch[F[_]](url: String)(using ctx: CpsMonadContext[F]): String^{ctx}
 *
 *   // After plugin marks it:
 *   @directFunction
 *   def fetch[F[_]](url: String)(using ctx: CpsMonadContext[F]): String^{ctx}
 *
 *   // After erasure phase transforms:
 *   def fetch[F[_]](url: String)(m: CpsTryMonad[F], o: CpsMonadContext[F]): F[String]
 * }}}
 */
class directFunction extends StaticAnnotation
